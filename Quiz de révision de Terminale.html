<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QCM Physique-Chimie - Terminale</title>

<style>
/* Reset & Base */
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background: url('https://cdn-imgix.headout.com/media/images/e4a728601dae2c994a2a7bba52d35e74-harrypotterlondon-13.jpg') 
                no-repeat center center fixed;
    background-size: cover;
    min-height: 100vh;
    padding: 20px;
}

.container { max-width: 1000px; margin: 0 auto; }

/* Header */
header {
    text-align: center;
    padding: 30px 20px;
    margin-bottom: 30px;
    color: white;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    background: url('https://media3.giphy.com/media/OZCZRFgOx9nGxd0XQf/giphy.gif') 
                no-repeat center center;
    background-size: cover;
    border-radius: 10px;
}
h1 { font-size: 2.5rem; margin-bottom: 10px; }
.subtitle { font-size: 1.2rem; opacity: 0.9; }

/* Containers */
.quiz-container, .leaderboard-container {
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    overflow: hidden;
    margin-bottom: 30px;
}
.quiz-header, .leaderboard-header {
    background: #2c3e50;
    color: white;
    padding: 20px;
    text-align: center;
}
.quiz-body, .leaderboard-body { padding: 30px; }

/* Questions */
.question {
    margin-bottom: 30px;
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    background: #f9f9f9;
    box-shadow: 0 3px 10px rgba(0,0,0,0.05);
}
.question-number { font-weight: bold; color: #2575fc; margin-bottom: 10px; }
.question-text { font-weight: bold; margin-bottom: 15px; color: #2c3e50; }
.options { display: flex; flex-direction: column; gap: 12px; }
.option { display: flex; align-items: center; gap: 12px; padding: 12px 15px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
.option:hover { background: #edf7fd; border-color: #3498db; }
.option input { cursor: pointer; transform: scale(1.2); }
.option label { cursor: pointer; width: 100%; }

/* Buttons */
.buttons { display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
.btn { padding: 12px 25px; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; font-weight: 600; }
.submit-btn { background: #3498db; color: white; }
.submit-btn:hover { background: #2980b9; }
.reset-btn { background: #e74c3c; color: white; }
.reset-btn:hover { background: #c0392b; }
.save-score-btn { background: #27ae60; color: white; }
.save-score-btn:hover { background: #219653; }
.show-leaderboard-btn { background: #8e44ad; color: white; }
.show-leaderboard-btn:hover { background: #732d91; }

/* Results */
.results {
    margin-top: 40px;
    padding: 30px;
    border-radius: 10px;
    text-align: center;
    display: none;
    background: #f8f9fa;
    border: 1px solid #e0e0e0;
}
.score { font-size: 2rem; font-weight: bold; margin-bottom: 20px; }
.score-details { font-size: 1.2rem; margin-bottom: 25px; }
.message { font-size: 1.3rem; margin-bottom: 25px; padding: 15px; border-radius: 8px; }

/* Leaderboard */
.leaderboard-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
.leaderboard-table th, .leaderboard-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #e0e0e0; }
.leaderboard-table th { background-color: #f8f9fa; font-weight: bold; }

/* Footer */
footer {
    text-align: center;
    padding: 20px;
    color: white;
    font-size: 0.9rem;
    opacity: 0.8;
    border-radius: 10px;
    background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.8)), url('https://i.pinimg.com/236x/5a/d8/77/5ad8779ec60744d790880a7f398f34cf.jpg') no-repeat center center;
    background-size: cover;
}
</style>
</head>
<body>


<div class="container">
<header>
    <h1>QCM de Physique-Chimie</h1>
    <p class="subtitle">Niveau Terminale - Testez vos connaissances</p>
</header>

<!-- Musique et bouton -->
<audio id="background-music" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>
<div style="text-align:center; margin: 15px 0;">
    <button class="btn" onclick="toggleMusic()" id="music-btn">üîá Couper la musique</button>
</div>

<div class="quiz-container" id="quiz-container">
    <div class="quiz-header">
        <h2>Questionnaire √† Choix Multiples</h2>
        <p>20 questions - Choisissez la bonne r√©ponse pour chaque question</p>
    </div>
    <div class="quiz-body">
        <div id="quiz"></div>
        <div class="buttons">
            <button class="btn submit-btn" onclick="checkAnswers()">Soumettre les r√©ponses</button>
            <button class="btn reset-btn" onclick="resetQuiz()">R√©initialiser</button>
        </div>
        <div class="results" id="results">
            <div class="score" id="score"></div>
            <div class="score-details" id="score-details"></div>
            
            <div class="save-score-container" id="save-score-container">
                <button class="btn save-score-btn" onclick="saveScore()">Enregistrer mon score</button>
            </div>
            
            <div class="buttons">
                <button class="btn show-leaderboard-btn" onclick="showLeaderboard()">Voir mon classement</button>
                <button class="btn reset-btn" onclick="resetQuiz()">Refaire le quiz</button>
            </div>
        </div>
    </div>
</div>

<div class="leaderboard-container" id="leaderboard-container" style="display:none;">
    <div class="leaderboard-header">
        <h2 id="leaderboard-title">Classement des Meilleurs Scores</h2>
    </div>
    <div class="leaderboard-body">
        <table class="leaderboard-table">
            <thead>
                <tr><th>Position</th><th>Nom</th><th>Score</th><th>Date & Heure</th><th>Commentaire</th></tr>
            </thead>
            <tbody id="leaderboard-body"></tbody>
        </table>
        <div class="buttons" style="justify-content:center; margin-top:20px;">
            <button class="btn reset-btn" onclick="hideLeaderboard()">Retour au quiz</button>
            <button class="btn reset-btn" onclick="clearLeaderboard()">Effacer mon classement</button>
        </div>
    </div>
</div>

<footer><p>&copy; 2025 Nguyen Thomas. Tous droits r√©serv√©s.</p></footer>
</div>

<script>
// --- CONFIGURATION ---
const CURRENT_USER = localStorage.getItem("currentUser") || "Guest";
const SCORE_STORAGE_KEY = `quizScores_${CURRENT_USER}_Seconde`;

// --- BANQUE DE QUESTIONS ---
const questionBank = [
    {question:"Quelle est l'unit√© de mesure de l'intensit√© du courant √©lectrique ?", options:["Volt","Amp√®re","Ohm","Watt"], correctAnswer:1},
    {question:"Quel gaz est majoritairement responsable de l'effet de serre additionnel ?", options:["Oxyg√®ne (O‚ÇÇ)","Diazote (N‚ÇÇ)","Dioxyde de carbone (CO‚ÇÇ)","Hydrog√®ne (H‚ÇÇ)"], correctAnswer:2},
    {question:"Formule chimique de l'eau ?", options:["CO‚ÇÇ","H‚ÇÇO","O‚ÇÇ","NaCl"], correctAnswer:1},
    {question:"Ph√©nom√®ne √† l'origine des mar√©es ?", options:["Rotation de la Terre","Attraction de la Lune","Courants marins","Pression atmosph√©rique"], correctAnswer:1},
    {question:"pH d'une solution neutre ?", options:["0","7","10","14"], correctAnswer:1},
    {question:"Particule charg√©e n√©gativement ?", options:["Proton","Neutron","√âlectron","Nucl√©on"], correctAnswer:2},
    {question:"R√©action avec l'oxyg√®ne ?", options:["R√©duction","Oxydation","Combustion","Neutralisation"], correctAnswer:2},
    {question:"Grandeur en joules ?", options:["Puissance","Intensit√©","√ânergie","Tension"], correctAnswer:2},
    {question:"Force qui s'oppose au glissement ?", options:["Gravitationnelle","√âlectromagn√©tique","Frottement","Centrifuge"], correctAnswer:2},
    {question:"Loi de la gravitation universelle ?", options:["Einstein","Newton","Galil√©e","Hawking"], correctAnswer:1},
    {question:"Symbole 'Na' ?", options:["Nickel","N√©on","Azote","Sodium"], correctAnswer:3},
    {question:"Vitesse lumi√®re ?", options:["300 000 m/s","3 000 000 m/s","30 000 000 m/s","300 000 000 m/s"], correctAnswer:3},
    {question:"Transformation chimique produisant chaleur ?", options:["Endothermique","Exothermique","Enzymatique","Oxydor√©duction"], correctAnswer:1},
    {question:"Formule vitesse-distance-temps ?", options:["v=d√ót","v=d/t","v=t/d","d=v√ót¬≤"], correctAnswer:1},
    {question:"Gaz n√©cessaire √† la respiration ?", options:["Diazote","CO‚ÇÇ","O‚ÇÇ","Hydrog√®ne"], correctAnswer:2},
    {question:"Formule chimique du sel ?", options:["H‚ÇÇO","CO‚ÇÇ","NaCl","C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ"], correctAnswer:2},
    {question:"Instrument pour mesurer la masse ?", options:["Dynamom√®tre","Balance","Voltm√®tre","Thermom√®tre"], correctAnswer:1},
    {question:"√âtat avec volume fixe mais pas forme ?", options:["Solide","Liquide","Gaz","Plasma"], correctAnswer:1},
    {question:"Particule d√©terminant l'identit√© d'un atome ?", options:["Neutron","Proton","√âlectron","Quark"], correctAnswer:1},
    {question:"Stylo dans l'eau semble cass√© ?", options:["R√©flexion","R√©fraction","Diffraction","Interf√©rence"], correctAnswer:1},
    {question:"Unit√© de force ?", options:["Joule","Watt","Newton","Pascal"], correctAnswer:2},
    {question:"Gaz produit par photosynth√®se ?", options:["CO‚ÇÇ","Diazote","O‚ÇÇ","Hydrog√®ne"], correctAnswer:2},
    {question:"Principal gaz atmosph√©rique ?", options:["O‚ÇÇ","CO‚ÇÇ","N‚ÇÇ","Argon"], correctAnswer:2},
    {question:"√ânergie utilis√©e par une √©olienne ?", options:["Hydraulique","Solaire","√âolienne","G√©othermique"], correctAnswer:2},
    {question:"Point d'√©bullition eau ?", options:["0¬∞C","50¬∞C","100¬∞C","200¬∞C"], correctAnswer:2},
    {question:"M√©tal liquide √† temp√©rature ambiante ?", options:["Fer","Cuivre","Mercure","Aluminium"], correctAnswer:2},
    {question:"Principe d'Archim√®de ?", options:["Newton","Ohm","Archim√®de","Pascal"], correctAnswer:2},
    {question:"Couleur longueur d'onde la plus courte ?", options:["Rouge","Vert","Bleu","Jaune"], correctAnswer:2},
    {question:"Acide dans le vinaigre ?", options:["Sulfurique","Chlorhydrique","Ac√©tique","Citrique"], correctAnswer:2},
    {question:"Ph√©nom√®ne permettant aux oiseaux de voler ?", options:["Pouss√©e d'Archim√®de","Effet Bernoulli","Force centrifuge","Conduction thermique"], correctAnswer:1}
];

// Variables
let currentScore=0; let totalQuestions=20;

// Musique auto au chargement
const music=document.getElementById("background-music");
let musicPlaying=true;
window.onload=function(){
    generateQuiz();
    music.play().catch(()=>{musicPlaying=false; document.getElementById("music-btn").textContent="üéµ Activer la musique";});
};

// Toggle musique
function toggleMusic(){
    if(musicPlaying){ music.pause(); musicPlaying=false; document.getElementById("music-btn").textContent="üéµ Activer la musique";}
    else{ music.play(); musicPlaying=true; document.getElementById("music-btn").textContent="üîá Couper la musique";}
}

// S√©lection al√©atoire
function selectRandomQuestions(){
    const shuffled=[...questionBank];
    for(let i=shuffled.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [shuffled[i],shuffled[j]]=[shuffled[j],shuffled[i]];
    }
    return shuffled.slice(0,20);
}

// G√©n√©ration du quiz
function generateQuiz(){
    const quizContainer=document.getElementById("quiz");
    quizContainer.innerHTML="";
    const selected=selectRandomQuestions();
    window.correctAnswers={};
    selected.forEach((q,index)=>{
        const qNum=index+1;
        window.correctAnswers[`q${qNum}`]=q.correctAnswer;
        quizContainer.innerHTML+=`
            <div class="question">
                <div class="question-number">Question ${qNum}/20</div>
                <div class="question-text">${q.question}</div>
                <div class="options">
                    ${q.options.map((opt,i)=>`
                        <label class="option">
                            <input type="radio" name="q${qNum}" value="${i}">${String.fromCharCode(97+i)}) ${opt}
                        </label>`).join("")}
                </div>
            </div>`;
    });
}

// V√©rification r√©ponses
function checkAnswers(){
    let score=0;
    totalQuestions=Object.keys(window.correctAnswers).length;
    for(let i=1;i<=totalQuestions;i++){
        const questionName="q"+i;
        const selected=document.querySelector(`input[name=${questionName}]:checked`);
        const questionElement=document.querySelectorAll(".question")[i-1];
        questionElement.classList.remove("correct","incorrect");
        if(selected){
            if(parseInt(selected.value)===window.correctAnswers[questionName]){score++;questionElement.classList.add("correct");}
            else{questionElement.classList.add("incorrect");}
        }
    }
    currentScore=score;
    document.getElementById("score").textContent=`Score: ${score}/${totalQuestions}`;
    document.getElementById("score-details").textContent=`Vous avez r√©pondu correctement √† ${score} questions sur ${totalQuestions}.`;
    document.getElementById("save-score-container").style.display="block";
    document.getElementById("results").style.display="block";
}

// Sauvegarde score
function saveScore(){
    const playerName=CURRENT_USER;
    if(playerName==="Guest"||!localStorage.getItem("isLoggedIn")){
        alert("Erreur: Vous devez √™tre connect√© pour enregistrer votre score.");
        document.getElementById("save-score-container").style.display="none"; return;
    }
    const scores=JSON.parse(localStorage.getItem(SCORE_STORAGE_KEY))||[];
    scores.push({
        name:playerName,
        score:currentScore,
        total:totalQuestions,
        date:new Date().toLocaleDateString("fr-FR"),
        time:new Date().toLocaleTimeString("fr-FR",{hour:'2-digit',minute:'2-digit'})
    });
    scores.sort((a,b)=>((b.score/b.total)-(a.score/a.total)));
    localStorage.setItem(SCORE_STORAGE_KEY,JSON.stringify(scores.slice(0,10)));
    alert(`Score enregistr√© avec succ√®s pour ${playerName}!`);
    document.getElementById("save-score-container").style.display="none";
}

// Commentaire
function getComment(score,total){
    const pct=(score/total)*100;
    if(pct>=90) return "Excellent ! üåü";
    if(pct>=70) return "Bien jou√© üôÇ";
    if(pct>=50) return "Peut mieux faire üòê";
    return "√Ä revoir üî¥";
}

// Classement
function showLeaderboard(){
    const leaderboard=document.getElementById("leaderboard-container");
    const body=document.getElementById("leaderboard-body");
    const scores=JSON.parse(localStorage.getItem(SCORE_STORAGE_KEY))||[];
    document.getElementById("leaderboard-title").textContent=`Mon Classement Personnel (Joueur : ${CURRENT_USER})`;
    body.innerHTML="";
    if(scores.length===0) body.innerHTML='<tr><td colspan="5" style="text-align:center;">Aucun score personnel enregistr√©.</td></tr>';
    else scores.forEach((s,i)=>{
        const pct=((s.score/s.total)*100).toFixed(1);
        const comment=getComment(s.score,s.total);
        body.innerHTML+=`<tr><td>${i+1}</td><td>${s.name}</td><td>${s.score}/${s.total} (${pct}%)</td><td>${s.date} √† ${s.time}</td><td>${comment}</td></tr>`;
    });
    document.getElementById("quiz-container").style.display="none";
    leaderboard.style.display="block";
}

function hideLeaderboard(){document.getElementById("leaderboard-container").style.display="none";document.getElementById("quiz-container").style.display="block";}
function clearLeaderboard(){ 
    if(confirm("Voulez-vous vraiment effacer tout VOTRE classement personnel ?")){
        localStorage.removeItem(SCORE_STORAGE_KEY);
        document.getElementById("leaderboard-body").innerHTML='<tr><td colspan="5" style="text-align:center;">Aucun score personnel enregistr√©.</td></tr>';
        alert("Votre classement personnel a √©t√© effac√©.");
    } 
}

function resetQuiz(){
    document.getElementById("quiz").innerHTML="";
    generateQuiz();
    document.getElementById("results").style.display="none";
    document.getElementById("save-score-container").style.display="none";
}
</script>
</body>
</html>
